<!doctype html><html><head><title>Kubenets in Action cli</title><meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><meta name=google-site-verification content><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name=viewport><meta content="telephone=no" name=format-detection><meta name=description content="kubernets in action 所使用的的指令"><meta name=renderer content="webkit"><meta name=theme-color content="#ffffff"><script async src="https://www.googletagmanager.com/gtag/js?id=G-GT370SNKC1"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-GT370SNKC1",{anonymize_ip:!1})}</script><link rel=icon href=https://www.okrust.com/favicon.png><script src=/js/toc.js></script>
<link type=text/css rel=stylesheet href=/vendor/css/bootstrap.min.css><link rel=stylesheet href=/scss/dark-mode.min.cb53f1bee2b8900cb4f082afbf00175d6618f281cf9a2fe8619e3b52d20b5721.css integrity="sha256-y1PxvuK4kAy08IKvvwAXXWYY8oHPmi/oYZ47UtILVyE=" media=screen><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Material+Icons"></head><body><div id=app><div class=single-column-drawer-container id=drawer v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }"><div class=drawer-content><div class=drawer-menu><a class="a-block drawer-menu-item active" href=/posts>Archive</a>
<a class="a-block drawer-menu-item false" href=/tags>Tags</a>
<a class="a-block drawer-menu-item false" href=/categories>Categories</a><div class=toc><div class=toc-content><center>- CATALOG -</center><ul><li><a href=#%e5%b8%b8%e7%94%a8%e6%8c%87%e4%bb%a4 class=nav-常用指令>常用指令</a></li><ul><li><a href=#2%e5%bc%80%e5%a7%8b%e4%bd%bf%e7%94%a8kubernets-%e5%92%8cdocker class=nav-2开始使用kubernets-和docker>2.开始使用kubernets 和docker</a></li><ul><li><a href=#1-%e5%88%9b%e5%bb%ba%e8%bf%90%e8%a1%8c%e5%8f%8a%e5%85%b1%e4%ba%ab%e5%ae%b9%e5%99%a8%e9%95%9c%e5%83%8f class=nav-1-创建运行及共享容器镜像>1. 创建、运行及共享容器镜像</a></li><li><a href=#3-%e8%bf%90%e8%a1%8c%e7%ac%ac%e4%b8%80%e4%b8%aa%e7%a8%8b%e5%ba%8f class=nav-3-运行第一个程序>3. 运行第一个程序</a></li><ul><li><a href=#2%e8%ae%bf%e9%97%ae%e7%ac%acweb-%e5%ba%94%e7%94%a8 class=nav-2访问第web-应用>2.访问第web 应用</a></li></ul></ul><li><a href=#3%e8%bf%90%e8%a1%8c%e4%ba%8ekuberntes-%e4%b8%ad%e7%9a%84%e5%ae%b9%e5%99%a8 class=nav-3运行于kuberntes-中的容器>3.运行于Kuberntes 中的容器</a></li><li><a href=#32-%e4%bb%a5yaml%e6%88%96%e8%80%85json%e6%96%87%e4%bb%b6%e5%88%9b%e5%bb%bapod class=nav-32-以yaml或者json文件创建pod>3.2 以YAML或者JSON文件创建pod</a></li><ul><ul><li><a href=#321-%e6%a3%80%e6%9f%a5%e7%8e%b0%e6%9c%89%e7%9a%84yaml%e6%8f%8f%e8%bf%b0 class=nav-321-检查现有的yaml描述>3.2.1 检查现有的yaml描述</a></li><li><a href=#323-kubectl-create-%e5%88%9b%e5%bb%bapod class=nav-323-kubectl-create-创建pod>3.2.3 kubectl create 创建pod</a></li><li><a href=#324-%e6%9f%a5%e7%9c%8b%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f%e6%97%a5%e5%bf%97 class=nav-324-查看应用程序日志>3.2.4 查看应用程序日志</a></li><li><a href=#325-%e5%90%91pod%e5%8f%91%e9%80%81%e8%af%b7%e6%b1%82 class=nav-325-向pod发送请求>3.2.5 向pod发送请求</a></li></ul><li><a href=#33-%e4%bd%bf%e7%94%a8%e6%a0%87%e7%ad%be%e7%bb%84%e7%bb%87pod class=nav-33-使用标签组织pod>3.3 使用标签组织pod</a></li><ul><li><a href=#332-%e5%88%9b%e5%bb%bapod%e6%a0%87%e7%ad%belabels class=nav-332-创建pod标签labels>3.3.2 创建pod标签labels</a></li><li><a href=#333-%e4%bf%ae%e6%94%b9%e6%b7%bb%e5%8a%a0pod-%e6%a0%87%e7%ad%be-labels class=nav-333-修改添加pod-标签-labels>3.3.3 修改添加pod 标签 labels</a></li></ul><li><a href=#34-%e9%80%9a%e8%bf%87%e6%a0%87%e7%ad%be%e9%80%89%e6%8b%a9%e5%99%a8%e5%88%97%e5%87%bapod%e5%ad%90%e9%9b%86 class=nav-34-通过标签选择器列出pod子集>3.4 通过标签选择器列出pod子集</a></li><ul><li><a href=#341-%e4%bd%bf%e7%94%a8%e6%a0%87%e7%ad%be%e9%80%89%e6%8b%a9%e5%99%a8%e5%88%97%e5%87%bapod class=nav-341-使用标签选择器列出pod>3.4.1 使用标签选择器列出pod</a></li><li><a href=#342-%e5%9c%a8%e6%a0%87%e7%ad%be%e9%80%89%e6%8b%a9%e5%99%a8%e4%b8%ad%e4%bd%bf%e7%94%a8%e5%a4%9a%e4%b8%aa%e6%9d%a1%e4%bb%b6 class=nav-342-在标签选择器中使用多个条件>3.4.2 在标签选择器中使用多个条件</a></li></ul><li><a href=#35-%e4%bd%bf%e7%94%a8%e6%a0%87%e7%ad%be%e5%92%8c%e9%80%89%e6%8b%a9%e5%99%a8%e6%9d%a5%e7%ba%a6%e6%9d%9fpod%e8%b0%83%e5%ba%a6 class=nav-35-使用标签和选择器来约束pod调度>3.5 使用标签和选择器来约束pod调度</a></li><ul><li><a href=#351-%e4%bd%bf%e7%94%a8%e6%a0%87%e7%ad%be%e5%88%86%e7%b1%bb%e5%b7%a5%e4%bd%9c%e8%8a%82%e7%82%b9 class=nav-351-使用标签分类工作节点>3.5.1 使用标签分类工作节点</a></li><li><a href=#352-%e5%b0%86pod%e8%b0%83%e5%ba%a6%e5%88%b0%e7%89%b9%e5%ae%9a%e8%8a%82%e7%82%b9 class=nav-352-将pod调度到特定节点>3.5.2 将pod调度到特定节点</a></li></ul><li><a href=#36-%e6%b3%a8%e8%a7%a3pod class=nav-36-注解pod>3.6 注解pod</a></li><ul><li><a href=#361-%e6%9f%a5%e6%89%be%e5%af%b9%e8%b1%a1%e7%9a%84%e6%b3%a8%e8%a7%a3 class=nav-361-查找对象的注解>3.6.1 查找对象的注解</a></li><li><a href=#362-%e6%b7%bb%e5%8a%a0%e5%92%8c%e4%bf%ae%e6%94%b9%e6%b3%a8%e8%a7%a3 class=nav-362-添加和修改注解>3.6.2 添加和修改注解</a></li></ul><li><a href=#37-%e4%bd%bf%e7%94%a8%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e5%af%b9%e8%b5%84%e6%ba%90%e8%bf%9b%e8%a1%8c%e5%88%86%e7%bb%84 class=nav-37-使用命名空间对资源进行分组>3.7 使用命名空间对资源进行分组</a></li><ul><li><a href=#372-%e5%8f%91%e7%8e%b0%e5%85%b6%e4%bb%96%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e5%8f%8a%e5%85%b6-pod class=nav-372-发现其他命名空间及其-pod>3.7.2 发现其他命名空间及其 pod</a></li><li><a href=#373-%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4 class=nav-373-创建一个命名空间>3.7.3 创建一个命名空间</a></li><li><a href=#374-%e7%ae%a1%e7%90%86%e5%85%b6%e4%bb%96%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e4%b8%ad%e7%9a%84%e5%af%b9%e8%b1%a1 class=nav-374-管理其他命名空间中的对象>3.7.4 管理其他命名空间中的对象</a></li></ul><li><a href=#38-%e5%81%9c%e6%ad%a2%e5%92%8c%e7%a7%bb%e9%99%a4-pod class=nav-38-停止和移除-pod>3.8 停止和移除 pod</a></li><ul><li><a href=#381-%e6%8c%89%e5%90%8d%e7%a7%b0%e5%88%a0%e9%99%a4-pod class=nav-381-按名称删除-pod>3.8.1 按名称删除 pod</a></li><li><a href=#382-%e4%bd%bf%e7%94%a8%e6%a0%87%e7%ad%be%e9%80%89%e6%8b%a9%e5%99%a8%e5%88%a0%e9%99%a4-pod class=nav-382-使用标签选择器删除-pod>3.8.2 使用标签选择器删除 pod</a></li><li><a href=#383-%e9%80%9a%e8%bf%87%e5%88%a0%e9%99%a4%e6%95%b4%e4%b8%aa%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e6%9d%a5%e5%88%a0%e9%99%a4-pod class=nav-383-通过删除整个命名空间来删除-pod>3.8.3 通过删除整个命名空间来删除 pod</a></li><li><a href=#384-%e5%88%a0%e9%99%a4%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e4%b8%ad%e7%9a%84%e6%89%80%e6%9c%89pod%e4%bd%86%e4%bf%9d%e7%95%99%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4 class=nav-384-删除命名空间中的所有pod但保留命名空间>3.8.4 删除命名空间中的所有pod，但保留命名空间</a></li><li><a href=#385-%e5%88%a0%e9%99%a4%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e4%b8%ad%e7%9a%84%e5%87%a0%e4%b9%8e%e6%89%80%e6%9c%89%e8%b5%84%e6%ba%90 class=nav-385-删除命名空间中的几乎所有资源>3.8.5 删除命名空间中的（几乎）所有资源</a></li></ul><li><a href=#39-%e6%9c%ac%e7%ab%a0%e5%b0%8f%e7%bb%93 class=nav-39-本章小结>3.9 本章小结</a></li></ul><li><a href=#4-%e5%89%af%e6%9c%ac%e6%9c%ba%e5%88%b6%e5%92%8c%e5%85%b6%e4%bb%96%e6%8e%a7%e5%88%b6%e5%99%a8%e9%83%a8%e7%bd%b2%e6%89%98%e7%ae%a1%e7%9a%84pod class=nav-4-副本机制和其他控制器部署托管的pod>4. 副本机制和其他控制器:部署托管的pod</a></li><ul><li><a href=#41-%e4%bf%9d%e6%8c%81pod%e5%81%a5%e5%ba%b7 class=nav-41-保持pod健康>4.1 保持pod健康</a></li><ul><li><a href=#411-%e4%bb%8b%e7%bb%8d%e5%ad%98%e6%b4%bb%e6%8e%a2%e9%92%88 class=nav-411-介绍存活探针>4.1.1 介绍存活探针</a></li><li><a href=#412-%e5%88%9b%e5%bb%ba%e5%9f%ba%e4%ba%8ehttp%e7%9a%84%e5%ad%98%e6%b4%bb%e6%8e%a2%e9%92%88 class=nav-412-创建基于http的存活探针>4.1.2 创建基于HTTP的存活探针</a></li><li><a href=#413-%e4%bd%bf%e7%94%a8%e5%ad%98%e6%b4%bb%e6%8e%a2%e9%92%88 class=nav-413-使用存活探针>4.1.3 使用存活探针</a></li><li><a href=#414-%e9%85%8d%e7%bd%ae%e5%ad%98%e6%b4%bb%e6%8e%a2%e9%92%88%e7%9a%84%e9%99%84%e5%8a%a0%e5%b1%9e%e6%80%a7 class=nav-414-配置存活探针的附加属性>4.1.4 配置存活探针的附加属性</a></li></ul></div></div></div></div></div><transition name=fade><div id=drawer-mask v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if=isDrawerOpen v-on:click=toggleDrawer></div></transition><nav id=navBar class="navbar sticky-top navbar-light single-column-nav-container"><div id=navBackground class=nav-background></div><div class="container container-narrow nav-content"><button id=nav_dropdown_btn class=nav-dropdown-toggle type=button v-on:click=toggleDrawer>
<i class=material-icons>menu</i></button>
<a id=navTitle class=navbar-brand href=https://www.okrust.com/>okrust</a>
<button type=button class=nav-darkmode-toggle id=darkModeToggleButton2>
<i class=material-icons id=darkModeToggleIcon2>dark_mode</i></button></div></nav><div class=single-column-header-container id=pageHead v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }"><a href=https://www.okrust.com/><div class=single-column-header-title>okrust</div></a></div><div id=content><div id=streamContainer class=stream-container><div class="post-list-container post-list-container-shadow"><div class=post><div class=post-head-wrapper style=background-image:url(https://w.wallhaven.cc/full/ex/wallhaven-ex9gwo.png)><div class=post-title>Kubenets in Action cli<div class=post-subtitle>kubernets in action 所使用的的指令</div><div class=post-meta><time itemprop=datePublished>2023-05-05 16:33</time>
<i class=material-icons>folder</i>
<a href=/categories/book>book</a>
&nbsp;
<i class=material-icons>label</i>
<a href=/tags/kubernets>kubernets</a>
&nbsp;
<a href=/tags/linux>linux</a>
&nbsp;</div></div></div><div class=post-body-wrapper><div class=post-body v-pre><h1 id=常用指令>常用指令</h1><blockquote><p>学习中文档不全,慢慢整理&mldr;..</p><p>所有资源来自 kubernets in action，只折抄个人需要的</p></blockquote><h2 id=2开始使用kubernets-和docker>2.开始使用kubernets 和docker</h2><h3 id=1-创建运行及共享容器镜像>1. 创建、运行及共享容器镜像</h3><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker build -t kubia .
</span></span></code></pre></div><h3 id=3-运行第一个程序>3. 运行第一个程序</h3><h4 id=2访问第web-应用>2.访问第web 应用</h4><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl expose rc kubia --type<span style=color:#ff7b72;font-weight:700>=</span>LoadBalancer --name kubia-http
</span></span></code></pre></div><blockquote><p>我们这里用的是replicationtroller的缩写rc。大 多数资源类型都有这样的缩写，所以不必输入全名（例如，pods的缩写是po,service的缩写是SVC，等等）列出服务</p></blockquote><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get service
</span></span><span style=display:flex><span>kubectl get svc
</span></span></code></pre></div><p>水平伸缩应用</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get replicationcontrollers
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NAME    DESIRED   CURRENT   READY  AGE                                                                                                                                                           
</span></span><span style=display:flex><span>kubia   <span style=color:#a5d6ff>1</span>         <span style=color:#a5d6ff>1</span>         <span style=color:#a5d6ff>1</span>      32m
</span></span></code></pre></div><blockquote><p>DESIRED 副本数量 ,CURRENT 希望运行的pod数量</p></blockquote><p>增加副本数量</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl scale rc kubia --replicas<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>3</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NAME    DESIRED   CURRENT   READY   AGE                                                                              
</span></span><span style=display:flex><span>kubia   <span style=color:#a5d6ff>3</span>         <span style=color:#a5d6ff>3</span>         <span style=color:#a5d6ff>1</span>       34m
</span></span></code></pre></div><p>如过有多个副本，则会均衡负载</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>root@master:/home/ubuntu/kubernetes-in-action-v1-notes/Chapter02# kubectl  get po                                                                               
</span></span><span style=display:flex><span>NAME          READY   STATUS    RESTARTS   AGE                                                                              
</span></span><span style=display:flex><span>kubia-chlfj   1/1     Running   <span style=color:#a5d6ff>0</span>          2m19s                                                                            
</span></span><span style=display:flex><span>kubia-lrql6   1/1     Running   <span style=color:#a5d6ff>0</span>          36m                                                                              
</span></span><span style=display:flex><span>kubia-qk7mv   1/1     Running   <span style=color:#a5d6ff>0</span>          2m19s                                                                                                                                                     
</span></span><span style=display:flex><span>root@master:/home/ubuntu/kubernetes-in-action-v1-notes/Chapter02# kubectl  get service                                                                          
</span></span><span style=display:flex><span>NAME         TYPE           CLUSTER-IP       EXTERNAL-IP   PORT<span style=color:#ff7b72;font-weight:700>(</span>S<span style=color:#ff7b72;font-weight:700>)</span>          AGE                                                                              
</span></span><span style=display:flex><span>kubernetes   ClusterIP      10.96.0.1        &lt;none&gt;        443/TCP          56m                                                                              
</span></span><span style=display:flex><span>kubia-http   LoadBalancer   10.104.229.236   &lt;pending&gt;     8080:31338/TCP   11m                                                                              
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>root@master:/home/ubuntu/kubernetes-in-action-v1-notes/Chapter02# curl 10.104.229.236:8080                                                                         
</span></span><span style=display:flex><span>You<span style=color:#a5d6ff>&#39;ve hit kubia-lrql6                                                                      
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>root@master:/home/ubuntu/kubernetes-in-action-v1-notes/Chapter02# curl 10.104.229.236:8080                                                                         
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>You&#39;</span>ve hit kubia-qk7mv                                                                      
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>root@master:/home/ubuntu/kubernetes-in-action-v1-notes/Chapter02# curl 10.104.229.236:8080                                                                         
</span></span><span style=display:flex><span>You<span style=color:#a5d6ff>&#39;ve hit kubia-qk7mv                                                                      
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>root@master:/home/ubuntu/kubernetes-in-action-v1-notes/Chapter02# curl 10.104.229.236:8080                                                                         
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>You&#39;</span>ve hit kubia-lrql6                                                                      
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>root@master:/home/ubuntu/kubernetes-in-action-v1-notes/Chapter02# curl 10.104.229.236:8080                                                                         
</span></span><span style=display:flex><span>You<span style=color:#a5d6ff>&#39;ve hit kubia-qk7mv                                                                      
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>root@master:/home/ubuntu/kubernetes-in-action-v1-notes/Chapter02# curl 10.104.229.236:8080                                                                         
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>You&#39;</span>ve hit kubia-qk7mv         
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>oot@master:/home/ubuntu/kubernetes-in-action-v1-notes/Chapter02# curl 10.104.229.236:8080                                                                         
</span></span><span style=display:flex><span>You<span style=color:#f85149>&#39;</span>ve hit kubia-chlfj
</span></span></code></pre></div><p>列出 pod 时显示 pod IP 和 pod 的节点</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get pods -o wide
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NAME          READY   STATUS    RESTARTS   AGE     IP          NODE    NOMINATED NODE   READINESS GATES 
</span></span><span style=display:flex><span>kubia-chlfj   1/1     Running   <span style=color:#a5d6ff>0</span>          8m49s   10.40.0.2   node2   &lt;none&gt;           &lt;none&gt;
</span></span><span style=display:flex><span>kubia-lrql6   1/1     Running   <span style=color:#a5d6ff>0</span>          42m     10.40.0.1   node2   &lt;none&gt;           &lt;none&gt;
</span></span><span style=display:flex><span>kubia-qk7mv   1/1     Running   <span style=color:#a5d6ff>0</span>          8m49s   10.38.0.1   node1   &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div><p>查看pod详细信息</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl describe pod kubia-chlfj
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Name:         kubia-chlfj                           
</span></span><span style=display:flex><span>Namespace:    default                             
</span></span><span style=display:flex><span>Priority:     <span style=color:#a5d6ff>0</span>           
</span></span><span style=display:flex><span>Node:         node2/192.168.0.201
</span></span><span style=display:flex><span>Start Time:   Fri, <span style=color:#a5d6ff>05</span> May <span style=color:#a5d6ff>2023</span> 09:04:47 +0000
</span></span><span style=display:flex><span>Labels:       <span style=color:#79c0ff>run</span><span style=color:#ff7b72;font-weight:700>=</span>kubia                                    
</span></span><span style=display:flex><span>Annotations:  &lt;none&gt;                       
</span></span><span style=display:flex><span>Status:       Running
</span></span><span style=display:flex><span>IP:           10.40.0.2
</span></span><span style=display:flex><span>IPs:                                                                         
</span></span><span style=display:flex><span>  IP:           10.40.0.2                                 
</span></span><span style=display:flex><span>Controlled By:  ReplicationController/kubia
</span></span></code></pre></div><p>访问GKE集群dashbord</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl cluster-info | grep dashboard
</span></span></code></pre></div><blockquote><p>如果你正在使 用 Google Kubemetes Engine</p></blockquote><h2 id=3运行于kuberntes-中的容器>3.运行于Kuberntes 中的容器</h2><h2 id=32-以yaml或者json文件创建pod>3.2 以YAML或者JSON文件创建pod</h2><h4 id=321-检查现有的yaml描述>3.2.1 检查现有的yaml描述</h4><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get po kubia-zxzij -o yaml
</span></span></code></pre></div><p><img src=/kubernet-in-action/2023-03-29_14-37.png alt=yaml>
<img src=/kubernet-in-action/2023-05-05_17-41.png alt=yaml></p><ul><li>metadata包括名称、命名空间、标 签和关于该容器 的其他信息。</li><li>spec包含p od内容的实际说明，例如p od的容器、卷和其他数据。</li><li>status包含运行中的pod的当前信息，例如po d所处的条件、每个容器的描述和状态，以及内部IP和其他基本信息</li></ul><p>使用 kubectl explain 来发现可能的 API 对象字段</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#在准备 manifest 时，可以转到 http: //kubemetes.io / docs /api 上的 Kubemetes参考文档查看每个 API 对象支持哪些属性，也可以使用 kubectl explain 命令 。例如，当从头创建一个 pod manifest 时，可以从请求 kubectl 来解释 pod 开始：</span>
</span></span><span style=display:flex><span>kubectl explain pods
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl explain pod.spec
</span></span></code></pre></div><h4 id=323-kubectl-create-创建pod>3.2.3 kubectl create 创建pod</h4><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl create -f kubia-manual.yam
</span></span></code></pre></div><p>得到pod完整定义</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get po kubia-manual -o yaml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl get po kubia-manual -o json
</span></span></code></pre></div><p>查看新建的pod</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get pods
</span></span></code></pre></div><h4 id=324-查看应用程序日志>3.2.4 查看应用程序日志</h4><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl logs kubia-manual
</span></span></code></pre></div><p>如果包含多个pod 的日志时指定容器名称</p><p>如果我们的pod包含多个容器， 在运行kubectl logs命令时则必须通过包含-c &lt;容器名称＞选项来显式指定容器名称。 在kubia-manual pod中， 我们将容器的名称设置为kubia, 所以如果该pod中有其他容器， 可以通过如下命令获取其日志</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl logs kubia-manual -c kubia
</span></span></code></pre></div><h4 id=325-向pod发送请求>3.2.5 向pod发送请求</h4><p>将本地网络端口转发到 pod 中的端口</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl  port-forward kubia-manual 8888:8080
</span></span></code></pre></div><h3 id=33-使用标签组织pod>3.3 使用标签组织pod</h3><h4 id=332-创建pod标签labels>3.3.2 创建pod标签labels</h4><p>创建pod</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl create -f kubia-manual-with-labels.yaml
</span></span></code></pre></div><p>查看标签</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get po --show-labels
</span></span></code></pre></div><p>查看指定的标签 labels,然后分组出来</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get po -L creation_method,env
</span></span></code></pre></div><p><img src=/kubernet-in-action/3.3.2/2023-05-06_17-08.png alt=img></p><h4 id=333-修改添加pod-标签-labels>3.3.3 修改添加pod 标签 labels</h4><p>新增标签</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl label po kubia-manual <span style=color:#79c0ff>creation_method</span><span style=color:#ff7b72;font-weight:700>=</span>manual
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#pod/kubia-manual labeled</span>
</span></span></code></pre></div><blockquote><p>标签也可以在现有 pod 上进行添加和修改。 由于 pod kubia -manual 也是手动创建的， 所以为其添加 creation_method=manual 标签：</p></blockquote><p>修改标签</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl label po kubia-manual-v2 <span style=color:#79c0ff>env</span><span style=color:#ff7b72;font-weight:700>=</span>debug --overwrite
</span></span></code></pre></div><blockquote><p>修改现有的标签需要添加 &ndash;overwrite</p></blockquote><p><img src=/kubernet-in-action/3.3.3/2023-05-06_17-20.png alt=img></p><h3 id=34-通过标签选择器列出pod子集>3.4 通过标签选择器列出pod子集</h3><h4 id=341-使用标签选择器列出pod>3.4.1 使用标签选择器列出pod</h4><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get po -L <span style=color:#79c0ff>creation_method</span><span style=color:#ff7b72;font-weight:700>=</span>manua
</span></span></code></pre></div><p>查询不包括<code>env</code>的pod</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get po -l <span style=color:#a5d6ff>&#39;!env&#39;</span>
</span></span></code></pre></div><p>查询不包括<code>env</code>的pod</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get po -l <span style=color:#a5d6ff>&#39;env&#39;</span>
</span></span></code></pre></div><blockquote><p>加入 &ndash;show-labels 显示lables信息</p></blockquote><p>多种查询条件</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get po -l <span style=color:#a5d6ff>&#39;run=kubia&#39;</span> --show-labels
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl get po -l <span style=color:#a5d6ff>&#39;run!=kubia&#39;</span> --show-labels
</span></span></code></pre></div><p><img src=/kubernet-in-action/3.4.1/2023-05-06_17-42.png alt=img></p><h4 id=342-在标签选择器中使用多个条件>3.4.2 在标签选择器中使用多个条件</h4><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get po -l <span style=color:#a5d6ff>&#39;creation_method=manual,method=manual&#39;</span> --show-labels
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl get po -l <span style=color:#a5d6ff>&#39;creation_method=manual,method!=manual&#39;</span> --show-labels
</span></span></code></pre></div><p><img src=/kubernet-in-action/3.4.2/2023-05-06_17-45.png alt=img></p><h3 id=35-使用标签和选择器来约束pod调度>3.5 使用标签和选择器来约束pod调度</h3><h4 id=351-使用标签分类工作节点>3.5.1 使用标签分类工作节点</h4><p>假如node1 是SSD,node2 是hdd，某些环境需要ssd，可以通过labels 置顶调度到某个节点</p><p>假设我们集群中的 一个节点刚添加完成， 它包含一个用于通用GPU计算的GPU。 我们希望向节点添加标签来展示这个功能特性， 可以通过将 标签gpu=true添加到其中一个节点来实现（只需从kubectl get nodes返回的列表中选择一
个）：</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl label node node1 <span style=color:#79c0ff>gpu</span><span style=color:#ff7b72;font-weight:700>=</span>true
</span></span></code></pre></div><p><img src=/kubernet-in-action/3.5.1/2023-05-06_18-00.png alt=img></p><p>查询拥有gpu labels的node</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get node -l gpu
</span></span></code></pre></div><h4 id=352-将pod调度到特定节点>3.5.2 将pod调度到特定节点</h4><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apiVersion: v1
</span></span><span style=display:flex><span>kind: Pod
</span></span><span style=display:flex><span>metadata:
</span></span><span style=display:flex><span>  name: kubia-gpu
</span></span><span style=display:flex><span>spec:
</span></span><span style=display:flex><span>  nodeSelector:
</span></span><span style=display:flex><span>    gpu: <span style=color:#a5d6ff>&#34;true&#34;</span> <span style=color:#8b949e;font-style:italic>#node节点有gput=true的，则会调度到这个节点</span>
</span></span><span style=display:flex><span>  containers:
</span></span><span style=display:flex><span>  - image: luksa/kubia
</span></span><span style=display:flex><span>    name: kubia
</span></span></code></pre></div><h3 id=36-注解pod>3.6 注解pod</h3><h4 id=361-查找对象的注解>3.6.1 查找对象的注解</h4><p><img src=/kubernet-in-action/3.6.1/2023-05-06_18-10.png alt=img></p><h4 id=362-添加和修改注解>3.6.2 添加和修改注解</h4><p>给 <code>kubia-manual</code> pod添加注解</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl annotate pod kubia-manual mycompany.com/someannotation<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;foo bar&#34;</span>
</span></span></code></pre></div><p>查看注解</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl describe pod kubia-manual
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#注解信息</span>
</span></span><span style=display:flex><span>Annotations:  mycompany.com/someannotation: foo bar
</span></span></code></pre></div><p><img src=/kubernet-in-action/3.6.2/2023-05-06_18-15.png alt=img></p><h3 id=37-使用命名空间对资源进行分组>3.7 使用命名空间对资源进行分组</h3><h4 id=372-发现其他命名空间及其-pod>3.7.2 发现其他命名空间及其 pod</h4><p>查看所有命名空间</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get ns
</span></span></code></pre></div><p>查看指定的命名空间pod,<code>kube-system</code></p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get po --namespace kube-system
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl get po -n kube-system
</span></span></code></pre></div><h4 id=373-创建一个命名空间>3.7.3 创建一个命名空间</h4><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apiVersion: v1
</span></span><span style=display:flex><span>kind: Namespace <span style=color:#8b949e;font-style:italic>#定义命名空间</span>
</span></span><span style=display:flex><span>metadata:
</span></span><span style=display:flex><span>  name: custom-namespace <span style=color:#8b949e;font-style:italic># 命名空间名称</span>
</span></span></code></pre></div><p>直接创建</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl create -f custom-namespace.yaml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#手动创建命名空间</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl create namespace custom-namespace
</span></span></code></pre></div><p>查看所有命名空间</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get namespace
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NAME               STATUS   AGE
</span></span><span style=display:flex><span>custom-namespace   Active   57s
</span></span><span style=display:flex><span>default            Active   4d
</span></span><span style=display:flex><span>kube-node-lease    Active   4d
</span></span><span style=display:flex><span>kube-public        Active   4d
</span></span><span style=display:flex><span>kube-system        Active   4d
</span></span></code></pre></div><h4 id=374-管理其他命名空间中的对象>3.7.4 管理其他命名空间中的对象</h4><p>在创建资源的时候，如果yaml文件没指定，可以在创建时候指定<code>命名空间</code></p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl create -f kubia-manual.yam1 -n custom-namespace
</span></span></code></pre></div><p>切换命名空间</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#获取所有</span>
</span></span><span style=display:flex><span>kubectl get namespace
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#</span>
</span></span><span style=display:flex><span>kubectl config set-context --current --namespace<span style=color:#ff7b72;font-weight:700>=</span>&lt;namespace&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl config set-context --current --namespace<span style=color:#ff7b72;font-weight:700>=</span>custom-namespace
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#指定操作命名空间</span>
</span></span><span style=display:flex><span>kubectl get pods -n &lt;namespace&gt;
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#</span>
</span></span></code></pre></div><h3 id=38-停止和移除-pod>3.8 停止和移除 pod</h3><h4 id=381-按名称删除-pod>3.8.1 按名称删除 pod</h4><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl delete po kubia-gpu
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#删除多个po </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl delete po podl pod2
</span></span></code></pre></div><h4 id=382-使用标签选择器删除-pod>3.8.2 使用标签选择器删除 pod</h4><p>删除带 <code>creation_method=manua</code> 的labels的pod</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl delete po -l <span style=color:#79c0ff>creation_method</span><span style=color:#ff7b72;font-weight:700>=</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#pod &#34;kubia-manual&#34; deleted</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#pod &#34;kubia-manual-v2&#34; deleted</span>
</span></span></code></pre></div><h4 id=383-通过删除整个命名空间来删除-pod>3.8.3 通过删除整个命名空间来删除 pod</h4><p>命名空间不需要的可以直接删除，同时删除里面的pod</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl delete ns custom-namespace
</span></span></code></pre></div><h4 id=384-删除命名空间中的所有pod但保留命名空间>3.8.4 删除命名空间中的所有pod，但保留命名空间</h4><p>删除所有的pod</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl delete po --all
</span></span></code></pre></div><p>再次查看会发现 之前的pod又重启回来,是因为<code>ReplicationController</code>，杀死之后会启动与之相同的pod，得得先删除 <code>ReplicationController</code></p><h4 id=385-删除命名空间中的几乎所有资源>3.8.5 删除命名空间中的（几乎）所有资源</h4><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl delete all --all
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>pod <span style=color:#a5d6ff>&#34;kubia-fvn4n&#34;</span> deleted
</span></span><span style=display:flex><span>pod <span style=color:#a5d6ff>&#34;kubia-lnwdg&#34;</span> deleted
</span></span><span style=display:flex><span>pod <span style=color:#a5d6ff>&#34;kubia-tgnlk&#34;</span> deleted
</span></span><span style=display:flex><span>replicationcontroller <span style=color:#a5d6ff>&#34;kubia&#34;</span> deleted <span style=color:#8b949e;font-style:italic>#删除了 ReplicationController 所有的资源被删除</span>
</span></span><span style=display:flex><span>service <span style=color:#a5d6ff>&#34;kubernetes&#34;</span> deleted
</span></span><span style=display:flex><span>service <span style=color:#a5d6ff>&#34;kubia-http&#34;</span> deleted
</span></span></code></pre></div><blockquote><p>命令中的第 一个 all 指定正在删除所有资源类型， 而 &ndash;all 选项指定将删除所有资源实例而不是按名称指定它们（我们在运行前一个删除命令时已经使用过此选项）。</p></blockquote><blockquote><p>注意 kubectl delete all &ndash;all 命令也会删除名为 kubernetes 的Service, 但它应该会在几分钟后自动重新创建。</p></blockquote><h3 id=39-本章小结>3.9 本章小结</h3><p>阅读本章之后， 你应该对 Kubemetes 的核心模块有了系统的了解。 在接下来的
几章中学到的概念也都与 pod 有着直接关联。</p><p>在本章中， 你应该已经掌握：</p><ul><li>如何决定是否应将某些容器组合在一个 pod 中。</li><li>pod可以运行多个进程， 这和非容器世界中的物理主机类似。</li><li>可以编写 YAML 或 JSON 描述文件用于创建 pod, 然后查看 pod 的规格及其
当前状态。</li><li>使用标签来组织 pod, 并且一 次在多个 pod 上执行操作。</li><li>可以使用节点标签将 pod 只调度到提供某些指定特性的节点上。</li><li>注解允许入们、 工具或库将更大的数据块附加到 pod。</li><li>命名空间可用千允 许不同团队使 用同 一 集 群， 就像它 们使 用单独的
Kubemetes 集群一 样。</li><li>使用 kubectl explain 命令快速查看任何 Kubernetes 资源的信息。
在下一章， 你将会了解到 ReplicationController 和其他管理 pod 的资源。</li></ul><h2 id=4-副本机制和其他控制器部署托管的pod>4. 副本机制和其他控制器:部署托管的pod</h2><h3 id=41-保持pod健康>4.1 保持pod健康</h3><ul><li>使用 Kubernetes 的一 个主要好处是， 可以给 Kubernetes 一个容器列表来由其 保
持容器在集群中的运行。 可以通过让 Kubernetes 创建 pod 资源， 为其选择 一 个工作
节点并在该节点上运行该 pod 的容器来完成此操作。 但是， 如果其中一个容器终止，
或一 个 pod 的所有容器都终止， 怎么办？</li><li>只要将 pod 调度到某个节点， 该节点上的 Kubelet 就会运行 pod 的容器， 从此
只要该 pod 存在， 就会保持运行。 如果容器的主进程崩溃， Kubelet 将重启容器。 如
果应用程序中有一 个导致它每隔 一 段时间就会崩溃的 bug, Kubemetes 会自动重启
应用程序， 所以即使应用程序本身没有做任何特殊的事， 在 Kubemetes 中运行也能
自动获得自我修复的能力。</li><li>即使进程没有崩溃， 有时应用程序也会停止正常工作。 例如， 具有内存泄漏的
Java 应用程序将开始抛出 OutOfMemoryErrors, 但 JVM 进程会一 直运行。 如果有
一种方法， 能让应用程序向 Kubernetes 发出信号， 告诉 Kubemetes 它运行异常并让
Kubemetes 重新启动， 那就很棒了。</li><li>我们已经说过， 一 个崩溃的容器会自动重启， 所以也许你会想到， 可以在应用
中捕获这类错误， 并在错误发生时退出该进程。 当然可以这样做， 但这仍然不能解
决所有的问题。</li><li>例如， 你的应用因为无限循环或死锁而停止响应。 为确保应用程序在这种情况
下可以重新启动， 必须从外部检查应用程序的运行状况， 而不是依赖于应用的内部
检测。</li></ul><h4 id=411-介绍存活探针>4.1.1 介绍存活探针</h4><p>Kubemetes 有以下三种探测容器的机制：</p><ul><li>HTTPGET 探针对容器的 IP 地址（你指定的端口和路径）执行 HTTP GET 请求。
如果探测器收到响应，并且响应状态码不代表错误（换句话说，如果HTTP
响应状态码是2xx或3xx), 则认为探测成功。如果服务器返回错误响应状态
码或者根本没有响应，那么探测就被认为是失败的，容器将被重新启动。</li><li>TCP套接字探针尝试与容器指定端口建立TCP连接。如果连接成功建立，则
探测成功。否则，容器重新启动。</li><li>Exec探针在容器内执行任意命令，并检查命令的退出状态码。如果状态码
是 o, 则探测成功。所有其他状态码都被认为失败。</li></ul><h4 id=412-创建基于http的存活探针>4.1.2 创建基于HTTP的存活探针</h4><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#7ee787>apiVersion</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>v1</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>kind</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>Pod</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>metadata</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>kubia-liveness</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>spec</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>containers</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span>- <span style=color:#7ee787>image</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>luksa/kubia-unhealthy</span><span style=color:#6e7681> </span><span style=color:#8b949e;font-style:italic>#的含么包怎用像知应镜不的^_（掉这了坏</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>kubia</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>livenessProbe</span>:<span style=color:#6e7681> </span><span style=color:#8b949e;font-style:italic># http get 探针</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>httpGet</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>path</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>/</span><span style=color:#6e7681> </span><span style=color:#8b949e;font-style:italic>#请求路径</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>port</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>8080</span><span style=color:#6e7681> </span><span style=color:#8b949e;font-style:italic>#端口</span><span style=color:#6e7681>
</span></span></span></code></pre></div><h4 id=413-使用存活探针>4.1.3 使用存活探针</h4><p>4.1.2 使用之后pod 报错会重启</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get po kubia-liveness
</span></span></code></pre></div><p>查看log日志</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#查看当前容器</span>
</span></span><span style=display:flex><span>kubectl logs mypod 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#查看上个容器为啥报错</span>
</span></span><span style=display:flex><span>kubectl logs mypod --previous
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#-----</span>
</span></span><span style=display:flex><span>Kubia server starting...
</span></span><span style=display:flex><span>Received request from ::ffff:10.40.0.0
</span></span><span style=display:flex><span>Received request from ::ffff:10.40.0.0
</span></span><span style=display:flex><span>Received request from ::ffff:10.40.0.0
</span></span><span style=display:flex><span>Received request from ::ffff:10.40.0.0
</span></span><span style=display:flex><span>Received request from ::ffff:10.40.0.0
</span></span><span style=display:flex><span>Received request from ::ffff:10.40.0.0
</span></span><span style=display:flex><span>Received request from ::ffff:10.40.0.0
</span></span><span style=display:flex><span>Received request from ::ffff:10.40.0.0
</span></span></code></pre></div><h4 id=414-配置存活探针的附加属性>4.1.4 配置存活探针的附加属性</h4><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get po kubia-liveness
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Liveness:       http-get http://:8080/ <span style=color:#79c0ff>delay</span><span style=color:#ff7b72;font-weight:700>=</span>0s <span style=color:#79c0ff>timeout</span><span style=color:#ff7b72;font-weight:700>=</span>1s <span style=color:#79c0ff>period</span><span style=color:#ff7b72;font-weight:700>=</span>10s <span style=color:#8b949e;font-style:italic>#success=1 #failure=3</span>
</span></span></code></pre></div><p>delay(延迟）、巨meout(超时）、period(周期）等。delay=Os部分显示在容器启动后立即开始探测。tmeout仅设置为1秒，因此容器必须在1秒内进行响应， 不然这次探测记作失败。每10秒探测一次容器(period=lOs), 并在探测连续三次失败(#falure= 3)后重启容器</p><p>添加自定义参数 <code>initalDelaySeconds</code></p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#7ee787>apiVersion</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>v1</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>kind</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>Pod</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>metadata</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>kubia-liveness</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>spec</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>containers</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span>- <span style=color:#7ee787>image</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>luksa/kubia-unhealthy</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>kubia</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>livenessProbe</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>httpGet</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>path</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>/</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>port</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>8080</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>initialDelaySeconds</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>15</span><span style=color:#6e7681> </span><span style=color:#8b949e;font-style:italic>#Kubernetes会在第—次探测前等待15秒</span><span style=color:#6e7681>
</span></span></span></code></pre></div><blockquote><p>提示务必记得设置一个初始延迟未说明应用程序的启动时间。如果程序启动过久则会重新启动容易，陷入循环</p></blockquote><p>很多场合都会看到这种情况， 用户很困惑为什么他们的容器正在重启。 但是如果使用kubectl describe, 他们会看到容器以退出码137或143结束， 并告诉他们 该pod是被迫终止的。 此外，pod事件的列表将显示容器因liveness探测失败而被终止。 如果你在pod启动时 看到这种情况， 那是因为未能适当设置
initialDelaySeconds。</p><blockquote><p>注意退出代码137表示进程被外部信号终止， 退出代码为128+9 (SIGKILL)。
同样， 退出代码143对应于128+15 (SIGTERM)。</p></blockquote><hr width=100% id=EOF><p style=color:#777>Last modified on 2023-05-10</p></div></div><nav class=post-pagination><a class=newer-posts>Next<br>No newer posts.</a>
<a class=older-posts href=/posts/kubernets/>Previous<br>kubernets 部署</a></nav><div class=post-comment-wrapper><p style=opacity:.6 align=center><small>Comments Disabled.</small></p></div></div></div></div></div><div id=sideContainer class=side-container><a class="a-block nav-head false" href=https://www.okrust.com/><div class=nav-title>okrust</div></a><div class=nav-link-list><a class="a-block nav-link-item active" href=/posts>Archive</a>
<a class="a-block nav-link-item false" href=/tags>Tags</a>
<a class="a-block nav-link-item false" href=/categories>Categories</a></div><div class=nav-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
okrust所有</div></div><div id=extraContainer class=extra-container><div class=toc-wrapper><div class=toc><div class=toc-content><center>- CATALOG -</center><ul><li><a href=#%e5%b8%b8%e7%94%a8%e6%8c%87%e4%bb%a4 class=nav-常用指令>常用指令</a></li><ul><li><a href=#2%e5%bc%80%e5%a7%8b%e4%bd%bf%e7%94%a8kubernets-%e5%92%8cdocker class=nav-2开始使用kubernets-和docker>2.开始使用kubernets 和docker</a></li><ul><li><a href=#1-%e5%88%9b%e5%bb%ba%e8%bf%90%e8%a1%8c%e5%8f%8a%e5%85%b1%e4%ba%ab%e5%ae%b9%e5%99%a8%e9%95%9c%e5%83%8f class=nav-1-创建运行及共享容器镜像>1. 创建、运行及共享容器镜像</a></li><li><a href=#3-%e8%bf%90%e8%a1%8c%e7%ac%ac%e4%b8%80%e4%b8%aa%e7%a8%8b%e5%ba%8f class=nav-3-运行第一个程序>3. 运行第一个程序</a></li><ul><li><a href=#2%e8%ae%bf%e9%97%ae%e7%ac%acweb-%e5%ba%94%e7%94%a8 class=nav-2访问第web-应用>2.访问第web 应用</a></li></ul></ul><li><a href=#3%e8%bf%90%e8%a1%8c%e4%ba%8ekuberntes-%e4%b8%ad%e7%9a%84%e5%ae%b9%e5%99%a8 class=nav-3运行于kuberntes-中的容器>3.运行于Kuberntes 中的容器</a></li><li><a href=#32-%e4%bb%a5yaml%e6%88%96%e8%80%85json%e6%96%87%e4%bb%b6%e5%88%9b%e5%bb%bapod class=nav-32-以yaml或者json文件创建pod>3.2 以YAML或者JSON文件创建pod</a></li><ul><ul><li><a href=#321-%e6%a3%80%e6%9f%a5%e7%8e%b0%e6%9c%89%e7%9a%84yaml%e6%8f%8f%e8%bf%b0 class=nav-321-检查现有的yaml描述>3.2.1 检查现有的yaml描述</a></li><li><a href=#323-kubectl-create-%e5%88%9b%e5%bb%bapod class=nav-323-kubectl-create-创建pod>3.2.3 kubectl create 创建pod</a></li><li><a href=#324-%e6%9f%a5%e7%9c%8b%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f%e6%97%a5%e5%bf%97 class=nav-324-查看应用程序日志>3.2.4 查看应用程序日志</a></li><li><a href=#325-%e5%90%91pod%e5%8f%91%e9%80%81%e8%af%b7%e6%b1%82 class=nav-325-向pod发送请求>3.2.5 向pod发送请求</a></li></ul><li><a href=#33-%e4%bd%bf%e7%94%a8%e6%a0%87%e7%ad%be%e7%bb%84%e7%bb%87pod class=nav-33-使用标签组织pod>3.3 使用标签组织pod</a></li><ul><li><a href=#332-%e5%88%9b%e5%bb%bapod%e6%a0%87%e7%ad%belabels class=nav-332-创建pod标签labels>3.3.2 创建pod标签labels</a></li><li><a href=#333-%e4%bf%ae%e6%94%b9%e6%b7%bb%e5%8a%a0pod-%e6%a0%87%e7%ad%be-labels class=nav-333-修改添加pod-标签-labels>3.3.3 修改添加pod 标签 labels</a></li></ul><li><a href=#34-%e9%80%9a%e8%bf%87%e6%a0%87%e7%ad%be%e9%80%89%e6%8b%a9%e5%99%a8%e5%88%97%e5%87%bapod%e5%ad%90%e9%9b%86 class=nav-34-通过标签选择器列出pod子集>3.4 通过标签选择器列出pod子集</a></li><ul><li><a href=#341-%e4%bd%bf%e7%94%a8%e6%a0%87%e7%ad%be%e9%80%89%e6%8b%a9%e5%99%a8%e5%88%97%e5%87%bapod class=nav-341-使用标签选择器列出pod>3.4.1 使用标签选择器列出pod</a></li><li><a href=#342-%e5%9c%a8%e6%a0%87%e7%ad%be%e9%80%89%e6%8b%a9%e5%99%a8%e4%b8%ad%e4%bd%bf%e7%94%a8%e5%a4%9a%e4%b8%aa%e6%9d%a1%e4%bb%b6 class=nav-342-在标签选择器中使用多个条件>3.4.2 在标签选择器中使用多个条件</a></li></ul><li><a href=#35-%e4%bd%bf%e7%94%a8%e6%a0%87%e7%ad%be%e5%92%8c%e9%80%89%e6%8b%a9%e5%99%a8%e6%9d%a5%e7%ba%a6%e6%9d%9fpod%e8%b0%83%e5%ba%a6 class=nav-35-使用标签和选择器来约束pod调度>3.5 使用标签和选择器来约束pod调度</a></li><ul><li><a href=#351-%e4%bd%bf%e7%94%a8%e6%a0%87%e7%ad%be%e5%88%86%e7%b1%bb%e5%b7%a5%e4%bd%9c%e8%8a%82%e7%82%b9 class=nav-351-使用标签分类工作节点>3.5.1 使用标签分类工作节点</a></li><li><a href=#352-%e5%b0%86pod%e8%b0%83%e5%ba%a6%e5%88%b0%e7%89%b9%e5%ae%9a%e8%8a%82%e7%82%b9 class=nav-352-将pod调度到特定节点>3.5.2 将pod调度到特定节点</a></li></ul><li><a href=#36-%e6%b3%a8%e8%a7%a3pod class=nav-36-注解pod>3.6 注解pod</a></li><ul><li><a href=#361-%e6%9f%a5%e6%89%be%e5%af%b9%e8%b1%a1%e7%9a%84%e6%b3%a8%e8%a7%a3 class=nav-361-查找对象的注解>3.6.1 查找对象的注解</a></li><li><a href=#362-%e6%b7%bb%e5%8a%a0%e5%92%8c%e4%bf%ae%e6%94%b9%e6%b3%a8%e8%a7%a3 class=nav-362-添加和修改注解>3.6.2 添加和修改注解</a></li></ul><li><a href=#37-%e4%bd%bf%e7%94%a8%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e5%af%b9%e8%b5%84%e6%ba%90%e8%bf%9b%e8%a1%8c%e5%88%86%e7%bb%84 class=nav-37-使用命名空间对资源进行分组>3.7 使用命名空间对资源进行分组</a></li><ul><li><a href=#372-%e5%8f%91%e7%8e%b0%e5%85%b6%e4%bb%96%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e5%8f%8a%e5%85%b6-pod class=nav-372-发现其他命名空间及其-pod>3.7.2 发现其他命名空间及其 pod</a></li><li><a href=#373-%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4 class=nav-373-创建一个命名空间>3.7.3 创建一个命名空间</a></li><li><a href=#374-%e7%ae%a1%e7%90%86%e5%85%b6%e4%bb%96%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e4%b8%ad%e7%9a%84%e5%af%b9%e8%b1%a1 class=nav-374-管理其他命名空间中的对象>3.7.4 管理其他命名空间中的对象</a></li></ul><li><a href=#38-%e5%81%9c%e6%ad%a2%e5%92%8c%e7%a7%bb%e9%99%a4-pod class=nav-38-停止和移除-pod>3.8 停止和移除 pod</a></li><ul><li><a href=#381-%e6%8c%89%e5%90%8d%e7%a7%b0%e5%88%a0%e9%99%a4-pod class=nav-381-按名称删除-pod>3.8.1 按名称删除 pod</a></li><li><a href=#382-%e4%bd%bf%e7%94%a8%e6%a0%87%e7%ad%be%e9%80%89%e6%8b%a9%e5%99%a8%e5%88%a0%e9%99%a4-pod class=nav-382-使用标签选择器删除-pod>3.8.2 使用标签选择器删除 pod</a></li><li><a href=#383-%e9%80%9a%e8%bf%87%e5%88%a0%e9%99%a4%e6%95%b4%e4%b8%aa%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e6%9d%a5%e5%88%a0%e9%99%a4-pod class=nav-383-通过删除整个命名空间来删除-pod>3.8.3 通过删除整个命名空间来删除 pod</a></li><li><a href=#384-%e5%88%a0%e9%99%a4%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e4%b8%ad%e7%9a%84%e6%89%80%e6%9c%89pod%e4%bd%86%e4%bf%9d%e7%95%99%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4 class=nav-384-删除命名空间中的所有pod但保留命名空间>3.8.4 删除命名空间中的所有pod，但保留命名空间</a></li><li><a href=#385-%e5%88%a0%e9%99%a4%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e4%b8%ad%e7%9a%84%e5%87%a0%e4%b9%8e%e6%89%80%e6%9c%89%e8%b5%84%e6%ba%90 class=nav-385-删除命名空间中的几乎所有资源>3.8.5 删除命名空间中的（几乎）所有资源</a></li></ul><li><a href=#39-%e6%9c%ac%e7%ab%a0%e5%b0%8f%e7%bb%93 class=nav-39-本章小结>3.9 本章小结</a></li></ul><li><a href=#4-%e5%89%af%e6%9c%ac%e6%9c%ba%e5%88%b6%e5%92%8c%e5%85%b6%e4%bb%96%e6%8e%a7%e5%88%b6%e5%99%a8%e9%83%a8%e7%bd%b2%e6%89%98%e7%ae%a1%e7%9a%84pod class=nav-4-副本机制和其他控制器部署托管的pod>4. 副本机制和其他控制器:部署托管的pod</a></li><ul><li><a href=#41-%e4%bf%9d%e6%8c%81pod%e5%81%a5%e5%ba%b7 class=nav-41-保持pod健康>4.1 保持pod健康</a></li><ul><li><a href=#411-%e4%bb%8b%e7%bb%8d%e5%ad%98%e6%b4%bb%e6%8e%a2%e9%92%88 class=nav-411-介绍存活探针>4.1.1 介绍存活探针</a></li><li><a href=#412-%e5%88%9b%e5%bb%ba%e5%9f%ba%e4%ba%8ehttp%e7%9a%84%e5%ad%98%e6%b4%bb%e6%8e%a2%e9%92%88 class=nav-412-创建基于http的存活探针>4.1.2 创建基于HTTP的存活探针</a></li><li><a href=#413-%e4%bd%bf%e7%94%a8%e5%ad%98%e6%b4%bb%e6%8e%a2%e9%92%88 class=nav-413-使用存活探针>4.1.3 使用存活探针</a></li><li><a href=#414-%e9%85%8d%e7%bd%ae%e5%ad%98%e6%b4%bb%e6%8e%a2%e9%92%88%e7%9a%84%e9%99%84%e5%8a%a0%e5%b1%9e%e6%80%a7 class=nav-414-配置存活探针的附加属性>4.1.4 配置存活探针的附加属性</a></li></ul></div></div></div><div class=pagination><a id=globalBackToTop class="pagination-action animated-visibility" href=#top :class="{ invisible: scrollY == 0 }"><i class="material-icons pagination-action-icon">keyboard_arrow_up</i></a>
<a type=button class=pagination-action id=darkModeToggleButton><span class="material-icons pagination-action-icon" id=darkModeToggleIcon>dark_mode</span></a></div></div><div id=single-column-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
okrust所有</div></div><script src=/js/journal.js></script></body></html>